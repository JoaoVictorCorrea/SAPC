<head th:fragment="head" lang="pt-br">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/custom.css}">
<!--     <link rel="stylesheet" th:href="@{/css/home.css}"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/grid.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="shortcut icon" type="imagex/png" th:href="@{/images/icone.ico}">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script th:src="@{/js/jquery-3.6.4.js}"></script>
</head>

<header th:fragment="header" class="header" id="header">
    <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i></div>
    <div class="name-font">Porteiro 1</div>
<!--     <div class="name-font" th:text="${#authentication.principal.nome}"></div> -->
</header>
    
<div th:fragment="sidebar" class="l-navbar" id="nav-bar">
    <nav class="nav">
        <div> 
        	<a href="#" class="nav_logo"><img id="icone-sidebar" th:src="@{/images/icone-sidebar.png}"><img id="logo-sidebar" th:src="@{/images/sidebar-logo.png}"></a>
            <div class="nav_list">
           		<a href="/home" class="nav_link"> <i class='bx bx-card nav_icon'></i> <span class="nav_name">Home</span></a>
            	<a href="/fluxo" class="nav_link"> <i class='bx bx-grid-alt nav_icon'></i> <span class="nav_name">Gerenciar Fluxo</span> </a> 
            	<a href="/morador" class="nav_link"> <i class='bx bx-user nav_icon'></i> <span class="nav_name">Moradores</span> </a> 
            	<a href="/usuario-externo" class="nav_link"> <i class='bx bx-id-card nav_icon'></i> <span class="nav_name">Usuários Externos</span> </a> 
            	
            	<a href="/solicitacao" class="nav_link"><i class='bx bx-envelope'></i><span class="nav_name">Solicitações</span></a> 
            	<a href="/lazer" class="nav_link"> <i class='bx bxs-tree-alt nav_icon'></i> <span class="nav_name">Área de Lazer</span> </a>
            </div>
        </div> 
        <a th:href="@{/logout}" class="nav_link"> <i class='bx bx-log-out nav_icon'></i> <span class="nav_name">Logout</span> </a>
    </nav>
</div>

<div th:fragment="nomePorteiro">
    <span th:text="${#authentication.name}"></span>!
</div>

<script th:fragment="sidebar-script">
   	document.addEventListener("DOMContentLoaded", function(event) {
   	   
	   	var sidebarAberto = false;
	   	const showNavbar = (toggleId, navId, bodyId, headerId) =>{
		   	const toggle = document.getElementById(toggleId),
		   	nav = document.getElementById(navId),
		   	bodypd = document.getElementById(bodyId),
		   	headerpd = document.getElementById(headerId)
	
		   	// Validar se todas variáveis existem
		   	if(toggle && nav && bodypd && headerpd){
			   	toggle.addEventListener('click', ()=>{
				   	// Mostra o menu
				   	nav.classList.toggle('show-sidebar')
				   	// mudar o icone
				   	toggle.classList.toggle('bx-x')
				   	// Adicionar o padding no body
				   	bodypd.classList.toggle('body-pd')
				   	// Adicionar o padding no header
				   	headerpd.classList.toggle('body-pd')
	   	
				   	if (sidebarAberto) {
					    $("#icone-sidebar").show();
					    $("#logo-sidebar").hide();
					    sidebarAberto = false;
				  	} else {
					    $("#icone-sidebar").hide();
					    $("#logo-sidebar").show();
					    sidebarAberto = true;
				  	}
	   			})
	   		}
	   	}
	   	
	   	showNavbar('header-toggle','nav-bar','body-pd','header')

   	});
   	
   	$(document).ready(function() {
   	  var url = window.location.pathname;
   	  var url_parts = url.split('/');
   	  var page_path = url_parts[1];
   	  $('a[href="/'+ page_path +'"]').addClass('active');
   	});


   	
   	
   	
</script>